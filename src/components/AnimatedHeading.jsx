import { motion } from "motion/react";
import { useEffect, useState } from "react";
import styles from "./AnimatedHeading.module.scss";

const letters = [
  "m 33.234264,109.72452 c 0.137818,6.54177 -1.855927,13.72708 1.847537,19.64233 6.576236,0.93993 11.037935,-13.53703 8.324202,-16.81759 -1.498413,5.24356 3.382574,13.90448 8.367772,17.60106 9.332253,3.22409 9.823598,-10.58001 6.361396,-16.18707 -3.20899,-7.51646 -2.903702,1.23219 -0.657943,4.48408 3.383703,5.12329 -2.507429,14.86075 -7.660022,7.40485 -3.663266,-3.72441 -3.696335,-12.68056 -6.940746,-14.10502 -0.332012,5.4528 -2.799557,13.90573 -6.52496,16.04623 -2.353629,-4.44979 -1.236413,-11.88091 -1.117358,-17.56146 0.39139,-1.49968 -1.795829,-2.3719 -1.999878,-0.50741 z",
  "m 65.832627,118.05162 c 5.905667,-2.20921 5.445109,-14.99871 -1.762789,-8.67476 -6.207551,6.56671 -1.121692,20.68013 8.726144,14.57753 2.861999,-0.72767 9.890231,-10.10078 4.939246,-8.26285 -1.493287,6.73075 -15.070885,11.76693 -14.33603,1.58942 -1.353404,-4.03551 6.807179,-12.08809 3.951642,-4.09895 -0.04907,1.55408 -5.994983,5.068 -1.518213,4.86961 z",
  "m 77.896742,98.07346 c 2.481881,7.73861 5.153242,15.57741 5.785649,23.79042 4.328054,1.98331 1.315687,-11.57916 6.930734,-13.45745 8.254368,-2.13643 8.992993,11.29026 2.145017,13.5704 -2.637868,0.79744 -12.542414,1.86412 -4.945501,3.02528 8.372163,1.13668 15.676189,-10.17568 9.394672,-16.6395 -8.493414,-7.72394 -14.442786,6.73609 -13.444559,13.8534 4.646051,-1.60975 -0.864289,-12.88208 -1.561113,-17.11816 -0.44771,-1.09809 -2.238512,-10.64463 -4.304899,-7.02439 z",
  "m 125.60945,101.19694 c 1.04792,6.27026 -4.53766,16.54215 -0.47292,20.37438 -0.0781,-6.33409 4.93176,-17.33701 0.78548,-21.16987 l -0.3125,0.79549 z",
  "m 115.86988,107.2216 c -0.053,-8.44196 11.40575,-5.78305 16.6958,-4.0809 12.33907,3.00605 4.86,16.60178 -3.10807,20.0435 -2.66864,1.66122 -14.2566,4.65454 -5.51678,4.52428 7.75428,-2.26616 15.39195,-8.24846 17.52616,-16.26976 0.88891,-7.58378 -7.92332,-10.67202 -13.95498,-11.64896 -5.59965,-2.12482 -16.96494,1.62792 -12.64219,8.49208 l 0.6875,-0.26517 0.3125,-0.79549 z",
  "m 143.14737,117.01976 c 5.18429,1.97493 14.89561,-6.39099 8.0046,-9.75714 -9.06831,-2.52425 -14.19881,14.23137 -4.82625,17.16812 2.61482,2.77347 14.50195,-1.22029 9.87865,-3.26306 -6.98255,6.70653 -17.90608,-3.04982 -10.63576,-10.21296 5.28975,-6.05889 8.90162,2.12941 1.85205,3.83213 -0.93646,0.43454 -8.06094,-0.42999 -4.27329,2.23291 z",
  "m 156.16467,113.52131 c 1.61282,3.14013 3.80803,14.65868 7.20007,11.13654 -0.0506,-2.55747 4.79594,-14.38062 0.17817,-11.36745 -0.0869,2.92544 -3.50794,14.11175 -0.97356,10.38244 -1.95158,-1.27064 -3.97976,-14.29053 -6.40468,-10.15153 z",
  "m 169.92627,115.26931 c 8.35383,6.17074 11.20594,-11.33085 1.96099,-7.34603 -5.57344,4.51726 -4.39849,16.61849 4.10017,16.83249 4.99836,0.60125 8.92574,-10.45294 2.63548,-3.46704 -8.29556,7.01944 -11.75543,-13.46909 -3.14852,-11.4737 3.04371,5.7296 -5.2001,3.12125 -6.11988,4.81914 l 0.57176,0.63527 z",
  "m 185.32212,98.1288 c 0.21276,7.78915 -0.95785,16.05693 2.50395,23.2793 4.19495,3.55017 6.92533,-5.70072 1.8238,-1.15378 -3.29915,-6.29007 -2.08594,-14.05425 -2.32771,-21.07244 0.47036,-1.47677 -1.36439,-3.4269 -2.00004,-1.05308 z",
  "m 194.58945,112.48668 c -6.04317,8.88974 11.59655,14.54371 9.54814,3.35314 0.13416,-5.80288 -13.51534,-7.33286 -4.49044,-2.72884 7.2008,3.40663 -1.63537,11.82999 -3.8738,4.1883 -0.45131,-1.30101 2.40255,-7.76681 -1.1839,-4.8126 z",
  "m 207.33183,108.9149 c -0.01,10.30971 2.16296,20.57962 3.3296,30.69484 4.29929,-3.65863 -1.47351,-14.10256 -0.66395,-20.26347 -1.36262,-1.77398 1.04869,-13.97237 -2.66565,-10.43137 z",
  "m 209.76289,114.23511 c 0.76855,-13.01203 15.62302,0.19283 7.66019,6.39699 -3.05731,3.36445 -11.02537,-6.41522 -7.67492,0.37487 7.50266,7.58895 14.96825,-3.02908 10.08412,-11.44865 -4.59447,-8.14275 -16.34031,2.10715 -10.38194,5.47233 l 0.3125,-0.7955 z",
  "m 224.78312,118.7492 c 7.52196,2.5373 16.06094,-12.29811 5.17442,-10.998 -9.57465,2.59763 -6.6497,20.12792 3.73027,16.54728 5.56595,-1.61187 2.96911,-5.45252 -1.17034,-1.74788 -10.11002,2.43701 -6.78641,-16.60955 0.78606,-12.21425 2.33874,6.75515 -11.92162,4.95256 -8.52041,8.41285 z",
  "m 236.84203,106.03808 c 1.55351,5.11139 -0.4041,15.19722 4.34538,17.45364 -1.28189,-7.48943 1.90122,-19.27181 11.38981,-17.95043 4.93316,-1.78013 -5.21826,-2.1499 -7.36256,-0.52313 -5.6897,2.65501 -8.63718,15.66403 -3.97438,17.32541 -2.224,-5.07218 -0.22805,-14.50494 -4.08571,-17.10102 l -0.3125,0.79549 z",
];

const AnimatedHeading = () => {
  const [key, setKey] = useState(0);
  const totalDuration = 0.4 + letters.length * 0.4;

  useEffect(() => {
    const interval = setInterval(() => {
      setKey((prevKey) => prevKey + 1);
    }, totalDuration * 1000);

    return () => clearInterval(interval);
  }, [totalDuration]);

  return (
    <motion.div key={key} initial="hidden" animate="visible">
      <svg className={styles.title} xmlns="http://www.w3.org/2000/svg">
        {letters.map((d, index) => (
          <motion.path
              key={index}
              d={d}
              fill="transparent"
              stroke="var(--lighter-jet)"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              initial={{ strokeDasharray: "100%", strokeDashoffset: "100%" }}
              animate={{ strokeDashoffset: 0 }}
              transition={{
                duration: 0.4,
                ease: "easeInOut",
                delay: 0.2 + index * 0.4,
              }}
          />
        ))}
      </svg>
    </motion.div>
  );
};

export default AnimatedHeading;
